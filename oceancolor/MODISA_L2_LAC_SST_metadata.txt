# Data source: 
# Data Format:
# Data type:
# Units: degrees C
# Approximate Data Range: -2 â€“ 45
# Spatial Resolution: 1 km 
# Temporal Resoultion: daily
# Projection system:
# Data Layer: 



# file naming convention:
#-------------------------------------------
# A for Aqua MODIS,  L-2 Local Area Coverage Sea Surface Temparature
A2006022172000.L2_LAC_SST.bz2

A 2006 022 17 20 00.L2_LAC_SST.bz2
A YYYY DDD HH MM SS.L2_LAC_SST.bz2



# Subdatasets of xxx.L2_LAC_SST.hdf:
#-----------------------------------------------------
  layer Number 1 : longitude (32-bit floating-point)
    HDF4_SDS:UNKNOWN:"/Users/neel/Downloads/A2014001000000.L2_LAC_SST":11
    
  layer Number 2 : latitude (32-bit floating-point)
    HDF4_SDS:UNKNOWN:"/Users/neel/Downloads/A2014001000000.L2_LAC_SST":12
    
  layer Number 3 : SST (16-bit integer)
    HDF4_SDS:UNKNOWN:"/Users/neel/Downloads/A2014001000000.L2_LAC_SST":15
    
  Layer Number 4: qual_sst (8-bit integer)
    HDF4_SDS:UNKNOWN:"/Users/neel/Downloads/A2014001000000.L2_LAC_SST":16
    
  Layer Number 5 : bias_sst (8-bit unsigned integer)
    HDF4_SDS:UNKNOWN:"/Users/neel/Downloads/A2014001000000.L2_LAC_SST":17
    
  Layer Number 6 : stdv_sst (8-bit unsigned integer)
    DF4_SDS:UNKNOWN:"/Users/neel/Downloads/A2014001000000.L2_LAC_SST":18
    
  Layer Number 7 : sstref (16-bit integer)
    HDF4_SDS:UNKNOWN:"/Users/neel/Downloads/A2014001000000.L2_LAC_SST":19
    
  Layer Number 8 : l2_flags (32-bit integer)
    HDF4_SDS:UNKNOWN:"/Users/neel/Downloads/A2014001000000.L2_LAC_SST":20




# Minimum pixel quality level to use, one of:
# ---------------------------------------------------

0 - best
1 - good (the default)
2 - questionable
3 - bad
4 - failed or SST not computed

All pixels with a quality level that is worse than the minimum will be masked and excluded from the output.



















# Long-wave SST Algorithm (SST)
#--------------------------------------------
source: http://oceancolor.gsfc.nasa.gov/DOCS/modis_sst/

The long-wave SST algorithm makes use of MODIS bands 31 and 32 at 11 amd 12 um. 
The brightness temperatures are derived from the observed radiances by inversion (in linear space) of the 
radiance versus blackbody temperature relationship. For msl12, these relationships were precomputed for the 
spectral response of each MODIS channel, and the tables were then stored in HDF files to be loaded at run-time. 
In modsst, the radiance versus blackbody temperature relationship was computed at run-time. The nonlinear 
SST algorithm was tuned for two different regimes based on brightness temperature difference. The algorithm 
for computing long-wave SST (sst) from observed brightness temperatures is shown below.


dBT <= 0.5
sst = a00 + a01*BT11 + a02*dBT*bsst + a03*dBT*(1.0/mu-1.0)

dBT >= 0.9
sst = a10 + a11*BT11 + a12*dBT*bsst + a13*dBT*(1.0/mu-1.0)

0.5 < dBt < 0.9
sstlo = a00 + a01*BT11 + a02*dBT*bsst + a03*dBT*(1.0/mu-1.0)
ssthi = a10 + a11*BT11 + a12*dBT*bsst + a13*dBT*(1.0/mu-1.0)
sst = sstlo + (dBT-0.5)/(0.9-0.5)*(ssthi-sstlo)

where:
dBT = BT11 - BT12
BT11 = brightness temperature at 11 um, in deg-C
BT12 = brightness temperature at 12 um, in deg-C
bsst = baseline SST, which is either sst4 (if valid) or sstref (from oisst)
mu = cosine of sensor zenith angle



# Quality Tests
#-----------------------------------------------

A series of quality tests are performed for each sst or sst4 retrieval. The quality tests are used to set the 
quality levels, which are then used to control the Level-3 binning process. For the msl12 implementation, each 
quality test was assigned a bit in a product-specific flag array. A separate, 16-bit flag product was created 
for both the short-wave (sst4) and long-wave (sst) products (flags_sst4 and flags_sst, respectively). 

The 16 flag bits were assigned as follows:

Bit	 Name	      Description

00	ISMASKED	  Pixel was aready masked
01	BTBAD	      Brightness temperatures are bad
02	BTRANGE	    Brightness temperatures are out-of-range (accepted range is -4 to 33 deg-C.)
03	BTDIFF	    Brightness temperatures are too different (dBT = BT11 - BT12; accepted range is is 0 to 3.6 deg-C.)
04	SSTRANGE	  SST outside valid range (accepted range is -2 to 45 deg-C.)
05	SSTREFDIFF	SST is too different from reference (sstref (oisst) value exceeds 3 deg-C)
06	SST4DIFF	  Longwave SST is different from shortwave SST
07	SST4VDIFF	  Longwave SST is very different from shortwave SST (difference between the long-wave and short-wave SST retrieval exceeds 1.0 deg-C)
08	BTNONUNIF	  Brightness temperatures are spatially non-uniform
09	BTVNONUNIF	Brightness temperatures are very spatially non-uniform
10	BT4REFDIFF	Brightness temperatures differ from reference
11	REDNONUNIF	Red-band spatial non-uniformity or saturation
12	HISENZ	    Sensor zenith angle high
13	VHISENZ	    Sensor zenith angle very high
14	SSTREFVDIFF	SST is too different from reference
15	Spare	      Spare


# Quality Levels
# --------------------------------------------------

The quality tests described above are used to set quality levels between 0 and 4, 
where 0 indicates best quality and 4 indicate complete failure or masked (usually land). 
The quality level determination varies between day and night conditions, and between 
the short-wave and long-wave SST products. The following tables show the quality test 
bits and associated quality levels. If no bits are set then the quality level is 0, 
but for short-wave SST retrievals in daylight the quality level is always set to 
3 (bad) or 4 (failed or not computed). The quality level information for each SST product, 
sst and sst4, can be output by msl12 as products qual_sst and qual_sst4, respectively.


Daytime Long-Wave SST

Quality Bit	 Minimum Quality Level
ISMASKED	   4
BTBAD	       4
VHISENZ	     3
BTRANGE	     3
SSTRANGE	   3
BTVNONUNIF	 3
SSTREFVDIFF	 3
BTNONUNIF	   2
REDNONUNIF	 2
SSTREFDIFF	 1
HISENZ	     1
0


# l2_flags
# --------------------------------------------------------- 
# Bit Set = 1 - Condition Indicated - Algorithm Name
  28 - sea surface temperature warning flag (MODIS only) - SSTWARN
  29 - sea surface temperature failure flag (MODIS only) - SSTFAIL
  
  
qual_sst (SST product only) 
  (byte, array size Number of Scan Lines x Pixels per Scan Line): 
    long_name = "Quality Levels, Sea Surface Temperature"; 
    units = "dimensionless"; 
    byte array indicating SST quality with range of 0 (best) to 3 (invalid); 
    used during generation of binned products to select best available data for a bin; 
    specific quality levels are documented in TBD.

qual_sst4 (SST4 product only) 
  (byte, array size Number of Scan Lines x Pixels per Scan Line): 
    long_name = "Quality Levels, Sea Surface Temperature"; 
    units = "dimensionless"; 
    byte array indicating SST4 quality with range of 0 (best) to 3 (invalid); 
    used during generation of binned products to select best available data for a bin; 
    specific quality levels are documented in TBD.
